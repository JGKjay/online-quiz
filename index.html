<!DOCTYPE html>
<html>
<head>
  <title>Online Quiz</title>
  <style>
    body { font-family: Arial; background: #f4f4f4; padding: 20px; }
    .box { background: white; padding: 20px; max-width: 800px; margin: auto; border-radius: 10px; box-shadow: 0px 0px 10px gray; }
    button { padding: 10px 20px; margin-top: 10px; cursor: pointer; }
    h2 { text-align: center; }
  </style>
</head>
<body>

<div class="box" id="home">
  <h2>Online Quiz</h2>
  <button onclick="showStudent()">Start Quiz (Student)</button><br><br>
  <button onclick="showAdmin()">Admin Login</button>
</div>

<div class="box" id="student" style="display:none;">
  <h2>Enter Your Full Name</h2>
  <input type="text" id="studentName" placeholder="Full Name">
  <br><br>
  <button onclick="startQuiz()">Start Quiz</button>
</div>

<div class="box" id="quiz" style="display:none;"></div>

<div class="box" id="result" style="display:none;"></div>

<div class="box" id="admin" style="display:none;">
  <h2>Admin Login</h2>
  <input type="password" id="adminPass" placeholder="Enter Password">
  <br><br>
  <button onclick="checkAdmin()">Login</button>
</div>

<div class="box" id="adminPanel" style="display:none;">
  <h2>Student Reports</h2>
  <table border="1" width="100%" id="reportTable">
    <tr><th>Name</th><th>Score</th></tr>
  </table>
  <br>
  <button onclick="exportExcel()">Download Excel</button>
</div>

<script>
let questions = [
{q:"1. What is the fine pitch size of hacksaw blade? | हैकसॉ ब्लेडचा महीन पिच आकार काय आहे?", o:["0.5 mm","0.6 mm","0.7 mm","0.8 mm"], a:3},
{q:"2. Other name of gilbow shear? | गिलबो शियरचे दुसरे नाव काय आहे?", o:["Block shear","Scotch shear","Rhodes shear","Universal combination shear"], a:3},
{q:"3. Material for mallets? | मेलेट कोणत्या साहित्यापासून बनवतात?", o:["Brass","Copper","Hard wood","Aluminium"], a:2},
{q:"4. Material for chisels & files? | छेनी व फाइलसाठी कोणते साहित्य?", o:["Stainless steel","Low carbon steel","High carbon steel","Medium carbon steel"], a:2},
{q:"5. HSS steel element? | HSS स्टीलसाठी वापरले जाणारे घटक?", o:["Nickel","Tungsten","Chromium","Manganese"], a:1},
{q:"6. Property carrying heat & electricity? | उष्णता व वीज वाहून नेणारा गुण?", o:["Tenacity","Elasticity","Machinability","Conductivity"], a:3},
{q:"7. Cheapest sheet metal? | सर्वात स्वस्त शीट मेटल?", o:["Copper","Stainless steel","Black iron","Galvanised iron"], a:2},
{q:"8. Household & airplane metal? | घरगुती व विमानासाठी साहित्य?", o:["Lead","Tinned","Copper","Aluminium"], a:1},
{q:"9. Designation of steel flats? | स्टील फ्लॅट्सचा संकेत?", o:["ISF","ISHF","ISSF","ISFS"], a:0},
{q:"10. PVC full form? | PVC चे पूर्ण रूप?", o:["Poly Vinyl Carbon","Poly Vinyl Chloric","Poly Vinyl Chloride","Plastic Vinyl Chloride"], a:0},
{q:"11. Tougher than GI sheet? | GI पेक्षा जास्त मजबूत शीट?", o:["Lead","Copper","Galvanised","Stainless steel"], a:3},
{q:"12. Water heater metal? | वॉटर हीटरसाठी धातू?", o:["Lead","Brass","Copper","Aluminium"], a:2},
{q:"13. Acid tank sheet? | ॲसिड टाकीसाठी शीट?", o:["Lead","Tinned","Copper","Stainless steel"], a:3}
];

let current = 0;
let score = 0;
let student = "";
let records = JSON.parse(localStorage.getItem("quizData")) || [];

function showStudent() {
  home.style.display = "none";
  student.style.display = "block";
}

function startQuiz() {
  student = document.getElementById("studentName").value;
  if(student === "") return alert("Enter your name");
  student.style.display = "none";
  quiz.style.display = "block";
  loadQuestion();
}

function loadQuestion() {
  let q = questions[current];
  quiz.innerHTML = `<h3>${q.q}</h3>`;
  q.o.forEach((opt, i) => {
    quiz.innerHTML += `<input type="radio" name="opt" value="${i}"> ${opt}<br>`;
  });
  quiz.innerHTML += `<br><button onclick="next()">Next</button>`;
}

function next() {
  let chosen = document.querySelector('input[name="opt"]:checked');
  if (!chosen) return alert("Select answer");

  if (parseInt(chosen.value) === questions[current].a) score++;

  current++;
  if (current < questions.length) loadQuestion();
  else finish();
}

function finish() {
  quiz.style.display = "none";
  result.style.display = "block";
  result.innerHTML = `<h2>Result</h2><h3>${student} Score: ${score}/${questions.length}</h3>`;

  records.push({name: student, score: score});
  localStorage.setItem("quizData", JSON.stringify(records));
}

function showAdmin() {
  home.style.display = "none";
  admin.style.display = "block";
}

function checkAdmin() {
  let pass = document.getElementById("adminPass").value;
  if (pass !== "0987654321") return alert("Wrong Password");

  admin.style.display = "none";
  adminPanel.style.display = "block";
  loadTable();
}

function loadTable() {
  let table = document.getElementById("reportTable");
  records.forEach(r => {
    let row = table.insertRow();
    row.insertCell(0).innerText = r.name;
    row.insertCell(1).innerText = r.score;
  });
}

function exportExcel() {
  let csv = "Name,Score\n";
  records.forEach(r => csv += r.name + "," + r.score + "\n");

  let blob = new Blob([csv], { type: "text/csv" });
  let link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "quiz-report.csv";
  link.click();
}
</script>

</body>
</html>
